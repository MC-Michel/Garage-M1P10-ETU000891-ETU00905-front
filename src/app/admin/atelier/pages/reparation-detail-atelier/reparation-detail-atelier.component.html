

<!-- BEGIN: Content-->
<div class="app-content content ">
    <div class="content-overlay"></div>
    <div class="header-navbar-shadow"></div>
    <div class="content-wrapper container-xxl p-0">
        <div class="content-header row">
        </div>
        <div class="content-body">
            <section>
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">
                                    Informations générales
                                </h4>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div>
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Récéption</th>
                                                    <th>Voiture</th>
                                                    <th>Immatriculation</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        {{car.currentRepair.receptionDate | date:'medium'}} 
                                                    </td>
                                                    <td>{{car.brand}}</td>
                                                    <td>{{car.numberPlate}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="row mt-3">
                                    <div class="col-12">
                                        <h5>Progression</h5>
                                        <div class="progress mb-3">
                                            <div class="progress-bar" role="progressbar" [style.width]="globalProgression+'%'" aria-valuenow="globalProgression" aria-valuemin="0" aria-valuemax="100">{{globalProgression}}%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <div class="row mt-2">
                <div class="col-12 text-end">
                    <app-gen-button [text]="'Facture'" [isLoading]="isInvoiceLoading" (genClick)="generateInvoice()" [customClass]="'ms-1 '"></app-gen-button>
                   
                    <button *ngIf="isRepairFinished" (click)="generateExitSlip()" class="ms-1 btn btn-primary">
                        Générer bon de sortie
                    </button>
                </div>
            </div>
            <div class="mt-2" cdkDropListGroup>
    
                <div class="example-container">
                  <h2>Réparation à faire</h2>
              
                  <div
                    cdkDropList
                    [cdkDropListData]="todo"
                    class="example-list"
                    (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of todo" cdkDrag>
                        <div class="row">
                            <div class="col-12">
                                <h3>
                                    {{item.label}}
                                    <span class="badge mx-2 rounded-pill bg-info bg-glow">
                                        {{item.price | number : env.pipe.number}} {{env.currency}}
                                    </span>
                                </h3>
                                <p>
                                    {{item.description}}
                                </p>
                                <div class="mt-3">
                                    <label for="formRange1" class="form-label">Progression (%)</label>
                                    <input class="form-control" type="number" value="{{item.progression}}" id="progression" disabled/>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="example-container">
                  <h2>En cours</h2>
              
                  <div
                    cdkDropList
                    [cdkDropListData]="inprogress"
                    class="example-list"
                    (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of inprogress" cdkDrag>
                        <div class="row">
                            <div class="col-12">
                                <h3>
                                    {{item.label}}
                                    <span class="badge mx-2 rounded-pill bg-info bg-glow">
                                        {{item.price | number : env.pipe.number}} {{env.currency}}
                                    </span>
                                </h3>
                                <p>
                                    {{item.description}}
                                </p>
                                <div class="mt-3">
                                    <label for="formRange1" class="form-label">Progression (%)</label>
                                    <input class="form-control" type="number" id="progression" [(ngModel)]="item.progression" (blur)="refreshProgression()" />
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
              
                <div class="example-container">
                  <h2>Terminée</h2>
              
                  <div
                    cdkDropList
                    [cdkDropListData]="ended"
                    class="example-list"
                    (cdkDropListDropped)="drop($event)">
                    <div class="example-box" *ngFor="let item of ended" cdkDrag>
                        <div class="row">
                            <div class="col-12">
                                <h3>
                                    {{item.label}}
                                    <span class="badge mx-2 rounded-pill bg-info bg-glow">
                                        {{item.price | number : env.pipe.number}} {{env.currency}}
                                    </span>
                                </h3>
                                <p>
                                    {{item.description}}
                                </p>
                                <div class="mt-3">
                                    <label for="formRange1" class="form-label">Progression (%)</label>
                                    <input class="form-control" type="number" value="{{item.progression}}" id="progression" disabled/>
                                </div>
                            </div>
                        </div>
                    </div>
                  </div>
                </div>
            </div>
              
        </div>
    </div>
</div>
<!-- END: Content-->

<!-- Car creation modal -->


<!-- Car update modal-->


